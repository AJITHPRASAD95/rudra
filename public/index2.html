<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rudrakalshethra - Bharatanatyam Dance School</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #fff5f0 0%, #ffe6d9 100%);
            color: #333;
            min-height: 100vh;
        }

        .header {
            background: linear-gradient(135deg, #d84315 0%, #f57c00 100%);
            color: white;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 28px;
            font-weight: bold;
        }

        .logo-icon {
            font-size: 40px;
        }

        .nav-menu {
            display: flex;
            gap: 30px;
            list-style: none;
        }

        .nav-menu li {
            cursor: pointer;
            padding: 10px 15px;
            border-radius: 8px;
            transition: background 0.3s;
        }

        .nav-menu li:hover, .nav-menu li.active {
            background: rgba(255,255,255,0.2);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
            background: rgba(255,255,255,0.2);
            padding: 8px 15px;
            border-radius: 20px;
        }

        .logout-btn {
            background: rgba(255,255,255,0.3);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .logout-btn:hover {
            background: rgba(255,255,255,0.4);
        }

        .container {
            max-width: 1200px;
            margin: 30px auto;
            padding: 0 20px;
        }

        .hero-section {
            background: linear-gradient(135deg, #ff6f00 0%, #ff8f00 100%);
            color: white;
            padding: 50px;
            border-radius: 20px;
            margin-bottom: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .hero-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .hero-text h1 {
            font-size: 48px;
            margin-bottom: 15px;
        }

        .hero-text p {
            font-size: 20px;
            opacity: 0.9;
        }

        .hero-icon {
            font-size: 120px;
            opacity: 0.3;
        }

        .section-title {
            font-size: 32px;
            margin-bottom: 30px;
            color: #d84315;
            font-weight: bold;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
        }

        .card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
        }

        .card-image {
            width: 100%;
            height: 200px;
            background: #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 60px;
            color: #999;
        }

        .card-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .card-content {
            padding: 20px;
        }

        .card-category {
            display: inline-block;
            background: #ffccbc;
            color: #d84315;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .card-title {
            font-size: 22px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }

        .card-description {
            color: #666;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .btn {
            background: linear-gradient(135deg, #d84315 0%, #f57c00 100%);
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: transform 0.2s;
            display: inline-block;
        }

        .btn:hover {
            transform: scale(1.05);
        }

        .btn-success {
            background: linear-gradient(135deg, #388e3c 0%, #4caf50 100%);
        }

        .btn-warning {
            background: linear-gradient(135deg, #f57c00 0%, #ffb300 100%);
        }

        .btn-danger {
            background: linear-gradient(135deg, #d32f2f 0%, #f44336 100%);
        }

        .btn-sm {
            padding: 8px 16px;
            font-size: 14px;
        }

        .quick-access {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .quick-access-card {
            background: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .quick-access-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }

        .quick-access-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 15px;
            background: #ffccbc;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
        }

        .quick-access-title {
            font-size: 18px;
            font-weight: bold;
            color: #333;
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 20px;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 30px;
            cursor: pointer;
            color: #999;
        }

        .modal-close:hover {
            color: #333;
        }

        .class-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .class-status {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .status-upcoming {
            background: #e3f2fd;
            color: #1976d2;
        }

        .status-ongoing {
            background: #e8f5e9;
            color: #388e3c;
        }

        .status-completed {
            background: #fbecec;
            color: #d32f2f;
        }

        .class-info {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin: 15px 0;
        }

        .info-row {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #666;
        }

        .theory-list {
            list-style: none;
        }

        .theory-item {
            background: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 15px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .theory-item:hover {
            transform: translateX(10px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.15);
        }

        .theory-icon {
            width: 60px;
            height: 60px;
            background: #ffccbc;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
        }

        .theory-content {
            flex: 1;
        }

        .theory-title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .theory-desc {
            color: #666;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #333;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #ff6f00;
        }

        .fab {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #d84315 0%, #f57c00 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 30px;
            cursor: pointer;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
            transition: transform 0.3s;
            z-index: 100;
        }

        .fab:hover {
            transform: scale(1.1);
        }

        /* Admin specific styles */
        .admin-controls {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .stat-number {
            font-size: 36px;
            font-weight: bold;
            color: #d84315;
            margin-bottom: 10px;
        }

        .stat-label {
            color: #666;
            font-size: 14px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        th {
            background: #ffccbc;
            color: #d84315;
            font-weight: bold;
        }

        tr:hover {
            background: #fff8f5;
        }

        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        .login-card {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
            width: 100%;
            max-width: 400px;
            text-align: center;
        }

        .login-title {
            font-size: 32px;
            margin-bottom: 10px;
            color: #d84315;
        }

        .login-subtitle {
            color: #666;
            margin-bottom: 30px;
        }

        .demo-accounts {
            margin-top: 25px;
            padding: 20px;
            background: #fff8f5;
            border-radius: 12px;
            text-align: left;
        }

        .demo-accounts h3 {
            color: #d84315;
            margin-bottom: 15px;
            text-align: center;
        }

        .demo-account {
            margin-bottom: 10px;
            padding: 10px;
            background: white;
            border-radius: 8px;
            border-left: 4px solid #ff6f00;
        }

        /* Student specific styles */
        .student-progress {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .progress-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            text-align: center;
        }

        .progress-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
        }

        .progress-bar {
            height: 10px;
            background: #e0e0e0;
            border-radius: 5px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #d84315 0%, #f57c00 100%);
            transition: width 0.5s ease;
        }

        .progress-text {
            font-size: 14px;
            color: #666;
        }

        /* Calendar styles */
        .calendar {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
        }

        .calendar-day {
            padding: 10px;
            text-align: center;
            border-radius: 8px;
            cursor: pointer;
        }

        .calendar-day:hover {
            background: #fff8f5;
        }

        .calendar-day.active {
            background: #ff6f00;
            color: white;
        }

        .calendar-day.has-class {
            background: #ffccbc;
        }

        /* Notification styles */
        .notification-badge {
            background: #f44336;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            position: absolute;
            top: -5px;
            right: -5px;
        }

        @media (max-width: 768px) {
            .nav-menu {
                gap: 10px;
            }

            .hero-text h1 {
                font-size: 32px;
            }

            .hero-icon {
                display: none;
            }

            .grid {
                grid-template-columns: 1fr;
            }

            .admin-controls {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- Login Page -->
    <div id="login-page" class="login-container">
        <div class="login-card">
            <div class="logo" style="justify-content: center; margin-bottom: 25px;">
                <span class="logo-icon">üé≠</span>
                <span style="font-size: 24px;">Rudrakalshethra</span>
            </div>
            
            <h1 class="login-title">Welcome Back</h1>
            <p class="login-subtitle">Sign in to your account</p>
            
            <form id="login-form">
                <div class="form-group">
                    <label for="email">Email Address</label>
                    <input type="email" id="email" placeholder="Enter your email" required>
                </div>
                
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" placeholder="Enter your password" required>
                </div>
                
                <button type="submit" class="btn" style="width: 100%;">
                    Sign In
                </button>
            </form>

            <div class="demo-accounts">
                <h3>Demo Accounts</h3>
                <div class="demo-account">
                    <strong>Admin:</strong> admin@rudrakalshethra.com / admin123
                </div>
                <div class="demo-account">
                    <strong>Student:</strong> student@rudrakalshethra.com / student123
                </div>
                <div class="demo-account">
                    <strong>Manager:</strong> manager@rudrakalshethra.com / manager123
                </div>
            </div>
        </div>
    </div>

    <!-- Main Application -->
    <div id="app" style="display: none;">
        <div class="header">
            <div class="header-content">
                <div class="logo">
                    <span class="logo-icon">üé≠</span>
                    <span>Rudrakalshethra</span>
                </div>
                <ul class="nav-menu" id="nav-menu">
                    <!-- Navigation will be populated based on user role -->
                </ul>
                <div class="user-info">
                    <span id="user-name">User</span>
                    <span id="user-role" style="background: rgba(255,255,255,0.3); padding: 4px 12px; border-radius: 12px; font-size: 12px;"></span>
                    <button class="logout-btn" onclick="logout()">
                        Logout
                    </button>
                </div>
            </div>
        </div>

        <div class="container">
            <!-- Admin Dashboard -->
            <div id="admin-dashboard" class="page">
                <div class="hero-section">
                    <div class="hero-content">
                        <div class="hero-text">
                            <h1>Admin Dashboard</h1>
                            <p>Manage students, classes, and payments</p>
                        </div>
                        <div class="hero-icon">üìä</div>
                    </div>
                </div>

                <h2 class="section-title">Quick Stats</h2>
                <div class="stats-grid" id="admin-stats">
                    <!-- Stats will be populated by JavaScript -->
                </div>

                <h2 class="section-title">Quick Actions</h2>
                <div class="quick-access">
                    <div class="quick-access-card" onclick="showPage('students')">
                        <div class="quick-access-icon">üë•</div>
                        <div class="quick-access-title">Manage Students</div>
                    </div>
                    <div class="quick-access-card" onclick="showPage('attendance')">
                        <div class="quick-access-icon">üìù</div>
                        <div class="quick-access-title">Take Attendance</div>
                    </div>
                    <div class="quick-access-card" onclick="showPage('payments')">
                        <div class="quick-access-icon">üí∞</div>
                        <div class="quick-access-title">Payment Records</div>
                    </div>
                    <div class="quick-access-card" onclick="showPage('classes')">
                        <div class="quick-access-icon">üéì</div>
                        <div class="quick-access-title">Class Schedule</div>
                    </div>
                </div>

                <h2 class="section-title">Recent Activity</h2>
                <div id="recent-activity">
                    <!-- Recent activity will be populated by JavaScript -->
                </div>
            </div>

            <!-- Student Dashboard -->
            <div id="student-dashboard" class="page">
                <div class="hero-section">
                    <div class="hero-content">
                        <div class="hero-text">
                            <h1>My Dashboard</h1>
                            <p>Track your progress and upcoming classes</p>
                        </div>
                        <div class="hero-icon">üåü</div>
                    </div>
                </div>

                <h2 class="section-title">My Progress</h2>
                <div class="student-progress" id="student-progress">
                    <!-- Progress will be populated by JavaScript -->
                </div>

                <h2 class="section-title">Upcoming Classes</h2>
                <div id="student-classes">
                    <!-- Classes will be populated by JavaScript -->
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 25px; margin-top: 30px;">
                    <div class="card">
                        <div class="card-content">
                            <h3 class="card-title">My Attendance</h3>
                            <div id="student-attendance"></div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-content">
                            <h3 class="card-title">Payment History</h3>
                            <div id="student-payments"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Students Management Page -->
            <div id="students" class="page">
                <div class="admin-controls">
                    <button class="btn" onclick="showAddStudentForm()">
                        + Add Student
                    </button>
                    <button class="btn btn-success" onclick="exportStudentData()">
                        Export Data
                    </button>
                    <input type="text" id="student-search" placeholder="Search students..." style="padding: 12px; border-radius: 8px; border: 2px solid #ddd; flex: 1;">
                </div>
                <h2 class="section-title">Students Management</h2>
                <table id="students-table">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Phone</th>
                            <th>Branch</th>
                            <th>Classes</th>
                            <th>Pending</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>

            <!-- Attendance Page -->
            <div id="attendance" class="page">
                <div class="admin-controls">
                    <input type="date" id="attendance-date" style="padding: 12px; border-radius: 8px; border: 2px solid #ddd;">
                    <select id="attendance-branch" style="padding: 12px; border-radius: 8px; border: 2px solid #ddd;">
                        <option value="all">All Branches</option>
                        <option value="kothavara">Kothavara</option>
                        <option value="ambikamarket">Ambikamarket</option>
                        <option value="edayazham">Edayazham</option>
                    </select>
                    <button class="btn" onclick="loadStudentsForAttendance()">
                        Load Students
                    </button>
                    <button class="btn btn-success" onclick="bulkMarkAttendance(true)">
                        Mark All Present
                    </button>
                    <button class="btn btn-warning" onclick="bulkMarkAttendance(false)">
                        Mark All Absent
                    </button>
                </div>
                <h2 class="section-title">Mark Attendance</h2>
                <table id="attendance-table">
                    <thead>
                        <tr>
                            <th>Student Name</th>
                            <th>Branch</th>
                            <th>Present</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
                <div style="text-align: right; margin-top: 20px;">
                    <button class="btn btn-success" onclick="submitAttendance()">
                        Submit Attendance
                    </button>
                </div>
            </div>

            <!-- Payments Page -->
            <div id="payments" class="page">
                <div class="admin-controls">
                    <button class="btn" onclick="showAddPaymentForm()">
                        + Record Payment
                    </button>
                    <button class="btn btn-success" onclick="exportPaymentData()">
                        Export Payments
                    </button>
                    <input type="month" id="payment-month" style="padding: 12px; border-radius: 8px; border: 2px solid #ddd;">
                </div>
                <h2 class="section-title">Payment Records</h2>
                <table id="payments-table">
                    <thead>
                        <tr>
                            <th>Student</th>
                            <th>Amount</th>
                            <th>Classes</th>
                            <th>Date</th>
                            <th>Method</th>
                            <th>Received By</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>

            <!-- Classes Page -->
            <div id="classes" class="page">
                <div class="admin-controls" id="classes-admin-controls" style="display: none;">
                    <button class="btn" onclick="showAddClassForm()">
                        + Add Class
                    </button>
                </div>
                <h2 class="section-title">Class Schedule</h2>
                <div id="classesContainer"></div>
            </div>

            <!-- Mudras Page -->
            <div id="mudras" class="page">
                <div class="admin-controls" id="mudra-admin-controls" style="display: none;">
                    <button class="btn" onclick="showAddMudraForm()">
                        + Add Mudra
                    </button>
                    <select id="mudra-category-filter" onchange="filterMudras()" style="padding: 12px; border-radius: 8px; border: 2px solid #ddd;">
                        <option value="">All Categories</option>
                        <option value="Asamyukta Hasta">Asamyukta Hasta</option>
                        <option value="Samyukta Hasta">Samyukta Hasta</option>
                    </select>
                </div>
                <h2 class="section-title">Mudra Tutorials</h2>
                <div id="mudraGrid" class="grid"></div>
            </div>

            <!-- Theory Page -->
            <div id="theory" class="page">
                <div class="admin-controls" id="theory-admin-controls" style="display: none;">
                    <button class="btn" onclick="showAddTheoryForm()">
                        + Add Theory
                    </button>
                </div>
                <h2 class="section-title">Theory & Concepts</h2>
                <div id="theoryGrid" class="grid"></div>
            </div>

            <!-- Calendar Page -->
            <div id="calendar" class="page">
                <h2 class="section-title">Class Calendar</h2>
                <div class="calendar">
                    <div class="calendar-header">
                        <button class="btn btn-sm" onclick="changeMonth(-1)">‚Üê Previous</button>
                        <h3 id="current-month">Month Year</h3>
                        <button class="btn btn-sm" onclick="changeMonth(1)">Next ‚Üí</button>
                    </div>
                    <div class="calendar-grid" id="calendar-days">
                        <!-- Calendar days will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- All Modals -->
    <div id="mudraModal" class="modal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeModal('mudraModal')">&times;</span>
            <div id="mudraDetail"></div>
        </div>
    </div>

    <div id="theoryModal" class="modal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeModal('theoryModal')">&times;</span>
            <div id="theoryDetail"></div>
        </div>
    </div>

    <div id="addMudraModal" class="modal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeModal('addMudraModal')">&times;</span>
            <h2 style="margin-bottom: 25px;">Add New Mudra</h2>
            <form id="addMudraForm">
                <div class="form-group">
                    <label>Mudra Name</label>
                    <input type="text" id="mudraName" required>
                </div>
                <div class="form-group">
                    <label>Category</label>
                    <select id="mudraCategory" required>
                        <option value="">Select Category</option>
                        <option value="Asamyukta Hasta">Asamyukta Hasta</option>
                        <option value="Samyukta Hasta">Samyukta Hasta</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Description</label>
                    <textarea id="mudraDescription" rows="3" required></textarea>
                </div>
                <div class="form-group">
                    <label>Usage (Meaning/Theory)</label>
                    <textarea id="mudraUsage" rows="3" required></textarea>
                </div>
                <div class="form-group">
                    <label>Image URL</label>
                    <input type="url" id="mudraImageUrl" required>
                </div>
                <button type="submit" class="btn" style="width: 100%;">Save Mudra</button>
            </form>
        </div>
    </div>

    <div id="addStudentModal" class="modal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeModal('addStudentModal')">&times;</span>
            <h2 style="margin-bottom: 25px;">Add New Student</h2>
            <form id="addStudentForm">
                <div class="form-group">
                    <label>Full Name</label>
                    <input type="text" id="studentName" required>
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="studentEmail" required>
                </div>
                <div class="form-group">
                    <label>Phone</label>
                    <input type="tel" id="studentPhone" required>
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="studentPassword" required>
                </div>
                <div class="form-group">
                    <label>Branch</label>
                    <select id="studentBranch" required>
                        <option value="kothavara">Kothavara</option>
                        <option value="ambikamarket">Ambikamarket</option>
                        <option value="edayazham">Edayazham</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Fee Per Class (‚Çπ)</label>
                    <input type="number" id="studentFee" value="400">
                </div>
                <button type="submit" class="btn" style="width: 100%;">Add Student</button>
            </form>
        </div>
    </div>

    <div id="addPaymentModal" class="modal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeModal('addPaymentModal')">&times;</span>
            <h2 style="margin-bottom: 25px;">Record Payment</h2>
            <form id="addPaymentForm">
                <div class="form-group">
                    <label>Student</label>
                    <select id="paymentStudent" required></select>
                </div>
                <div class="form-group">
                    <label>Amount (‚Çπ)</label>
                    <input type="number" id="paymentAmount" required>
                </div>
                <div class="form-group">
                    <label>Number of Classes</label>
                    <input type="number" id="paymentClasses" required>
                </div>
                <div class="form-group">
                    <label>Payment Method</label>
                    <select id="paymentMethod">
                        <option value="cash">Cash</option>
                        <option value="online">Online</option>
                        <option value="card">Card</option>
                    </select>
                </div>
                <button type="submit" class="btn" style="width: 100%;">Record Payment</button>
            </form>
        </div>
    </div>

    <div id="addTheoryModal" class="modal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeModal('addTheoryModal')">&times;</span>
            <h2 style="margin-bottom: 25px;">Add Theory Content</h2>
            <form id="addTheoryForm">
                <div class="form-group">
                    <label>Title</label>
                    <input type="text" id="theoryTitle" required>
                </div>
                <div class="form-group">
                    <label>Category</label>
                    <input type="text" id="theoryCategory" required>
                </div>
                <div class="form-group">
                    <label>Description</label>
                    <textarea id="theoryDescription" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label>Content</label>
                    <textarea id="theoryContent" rows="6" required></textarea>
                </div>
                <div class="form-group">
                    <label>Order</label>
                    <input type="number" id="theoryOrder" value="0">
                </div>
                <button type="submit" class="btn" style="width: 100%;">Add Theory</button>
            </form>
        </div>
    </div>

    <div id="addClassModal" class="modal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeModal('addClassModal')">&times;</span>
            <h2 style="margin-bottom: 25px;">Add New Class</h2>
            <form id="addClassForm">
                <div class="form-group">
                    <label>Class Title</label>
                    <input type="text" id="classTitle" required>
                </div>
                <div class="form-group">
                    <label>Schedule</label>
                    <input type="text" id="classSchedule" placeholder="Mon, Wed, Fri - 7:00 AM" required>
                </div>
                <div class="form-group">
                    <label>Duration</label>
                    <input type="text" id="classDuration" placeholder="1 hour" required>
                </div>
                <div class="form-group">
                    <label>Instructor</label>
                    <input type="text" id="classInstructor" required>
                </div>
                <div class="form-group">
                    <label>Meet Link</label>
                    <input type="url" id="classMeetLink" required>
                </div>
                <div class="form-group">
                    <label>Branch</label>
                    <select id="classBranch" required>
                        <option value="kothavara">Kothavara</option>
                        <option value="ambikamarket">Ambikamarket</option>
                        <option value="edayazham">Edayazham</option>
                    </select>
                </div>
                <button type="submit" class="btn" style="width: 100%;">Add Class</button>
            </form>
        </div>
    </div>

    <script>
        // Global variables
        let currentUser = null;
        let allMudras = [];
        let allStudents = [];
        let allTheory = [];
        let currentMonth = new Date().getMonth();
        let currentYear = new Date().getFullYear();

        // Sample data
        const sampleMudras = [
            {
                _id: '1',
                name: 'Pataka',
                category: 'Asamyukta Hasta',
                description: 'The flag hand gesture',
                meaning: 'Used to represent clouds, forest, night, river, etc.',
                image: 'https://via.placeholder.com/300x200?text=Pataka+Mudra'
            },
            {
                _id: '2',
                name: 'Tripataka',
                category: 'Asamyukta Hasta',
                description: 'The flag with three parts',
                meaning: 'Used to represent crown, tree, arrow, etc.',
                image: 'https://via.placeholder.com/300x200?text=Tripataka+Mudra'
            }
        ];

        const sampleTheory = [
            {
                _id: '1',
                title: 'Introduction to Bharatanatyam',
                category: 'History',
                description: 'The origins and evolution of Bharatanatyam',
                content: 'Bharatanatyam is one of the oldest classical dance forms of India, originating from Tamil Nadu...'
            },
            {
                _id: '2',
                title: 'Tala System',
                category: 'Rhythm',
                description: 'Understanding the rhythmic patterns in Bharatanatyam',
                content: 'Tala refers to the rhythmic cycle in Indian classical music and dance...'
            }
        ];

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('attendance-date').value = new Date().toISOString().split('T')[0];
            
            // Event listeners
            document.getElementById('login-form').addEventListener('submit', function(e) {
                e.preventDefault();
                const email = document.getElementById('email').value;
                const password = document.getElementById('password').value;
                login(email, password);
            });

            // Form submissions
            document.getElementById('addMudraForm').addEventListener('submit', handleAddMudra);
            document.getElementById('addStudentForm').addEventListener('submit', handleAddStudent);
            document.getElementById('addPaymentForm').addEventListener('submit', handleAddPayment);
            document.getElementById('addTheoryForm').addEventListener('submit', handleAddTheory);
            document.getElementById('addClassForm').addEventListener('submit', handleAddClass);

            // Search functionality
            document.getElementById('student-search').addEventListener('input', filterStudents);
        });

        // Authentication functions
        function login(email, password) {
            // Demo authentication - in real app, this would call an API
            let user = null;
            
            if (email === 'admin@rudrakalshethra.com' && password === 'admin123') {
                user = {
                    name: 'Admin User',
                    email: email,
                    role: 'admin',
                    branch: 'all'
                };
            } else if (email === 'student@rudrakalshethra.com' && password === 'student123') {
                user = {
                    name: 'Student Demo',
                    email: email,
                    role: 'student',
                    branch: 'kothavara',
                    studentId: 'STU001'
                };
            } else if (email === 'manager@rudrakalshethra.com' && password === 'manager123') {
                user = {
                    name: 'Branch Manager',
                    email: email,
                    role: 'manager',
                    branch: 'kothavara'
                };
            }
            
            if (user) {
                currentUser = user;
                initializeApp();
            } else {
                alert('Invalid credentials. Please use demo accounts provided.');
            }
        }

        function logout() {
            currentUser = null;
            document.getElementById('login-page').style.display = 'flex';
            document.getElementById('app').style.display = 'none';
            document.getElementById('login-form').reset();
        }

        function initializeApp() {
            document.getElementById('login-page').style.display = 'none';
            document.getElementById('app').style.display = 'block';
            
            // Update user info
            document.getElementById('user-name').textContent = currentUser.name;
            document.getElementById('user-role').textContent = currentUser.role;
            
            // Setup navigation based on role
            setupNavigation();
            
            // Load initial data
            if (currentUser.role === 'student') {
                showPage('student-dashboard');
                loadStudentDashboard();
            } else {
                showPage('admin-dashboard');
                loadAdminDashboard();
            }
        }

        function setupNavigation() {
            const navMenu = document.getElementById('nav-menu');
            navMenu.innerHTML = '';
            
            if (currentUser.role === 'student') {
                navMenu.innerHTML = `
                    <li class="active" onclick="showPage('student-dashboard')">Dashboard</li>
                    <li onclick="showPage('mudras')">Mudras</li>
                    <li onclick="showPage('theory')">Theory</li>
                    <li onclick="showPage('classes')">Classes</li>
                    <li onclick="showPage('calendar')">Calendar</li>
                `;
            } else {
                navMenu.innerHTML = `
                    <li class="active" onclick="showPage('admin-dashboard')">Dashboard</li>
                    <li onclick="showPage('students')">Students</li>
                    <li onclick="showPage('attendance')">Attendance</li>
                    <li onclick="showPage('payments')">Payments</li>
                    <li onclick="showPage('classes')">Classes</li>
                    <li onclick="showPage('mudras')">Mudras</li>
                    <li onclick="showPage('theory')">Theory</li>
                    <li onclick="showPage('calendar')">Calendar</li>
                `;
                
                // Show admin controls for admin users
                if (currentUser.role === 'admin') {
                    document.getElementById('mudra-admin-controls').style.display = 'flex';
                    document.getElementById('theory-admin-controls').style.display = 'flex';
                    document.getElementById('classes-admin-controls').style.display = 'flex';
                }
            }
        }

        function showPage(pageName) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            document.querySelectorAll('.nav-menu li').forEach(item => item.classList.remove('active'));
            
            // Show selected page
            document.getElementById(pageName).classList.add('active');
            
            // Update active nav link
            const navItem = document.querySelector(`.nav-menu li[onclick*="${pageName}"]`);
            if (navItem) navItem.classList.add('active');
            
            // Load page-specific data
            if (pageName === 'mudras') loadMudras();
            if (pageName === 'theory') loadTheory();
            if (pageName === 'students') loadStudents();
            if (pageName === 'attendance') loadStudentsForAttendance();
            if (pageName === 'payments') loadPayments();
            if (pageName === 'classes') loadClasses();
            if (pageName === 'admin-dashboard') loadAdminDashboard();
            if (pageName === 'student-dashboard') loadStudentDashboard();
            if (pageName === 'calendar') loadCalendar();
        }

        // Admin Dashboard functions
        function loadAdminDashboard() {
            // Sample stats data
            const stats = {
                totalStudents: 45,
                activeStudents: 38,
                monthlyRevenue: 12500,
                attendanceRate: 85
            };

            document.getElementById('admin-stats').innerHTML = `
                <div class="stat-card">
                    <div class="stat-number">${stats.totalStudents}</div>
                    <div class="stat-label">Total Students</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">${stats.activeStudents}</div>
                    <div class="stat-label">Active Students</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">‚Çπ${stats.monthlyRevenue}</div>
                    <div class="stat-label">Monthly Revenue</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">${stats.attendanceRate}%</div>
                    <div class="stat-label">Attendance Rate</div>
                </div>
            `;

            // Recent activity
            document.getElementById('recent-activity').innerHTML = `
                <div class="class-card">
                    <div class="info-row">üìù <strong>Attendance marked</strong> for today (${new Date().toLocaleDateString()})</div>
                    <div class="info-row">üí∞ <strong>Payment received</strong> from Student Demo - ‚Çπ2000</div>
                    <div class="info-row">üë• <strong>New student registered</strong> - Priya Sharma</div>
                </div>
            `;
        }

        // Student Dashboard functions
        function loadStudentDashboard() {
            // Progress data
            document.getElementById('student-progress').innerHTML = `
                <div class="progress-card">
                    <div class="progress-title">Mudras Learned</div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 65%"></div>
                    </div>
                    <div class="progress-text">13/20 mudras mastered</div>
                </div>
                <div class="progress-card">
                    <div class="progress-title">Theory Completed</div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 40%"></div>
                    </div>
                    <div class="progress-text">8/20 topics completed</div>
                </div>
                <div class="progress-card">
                    <div class="progress-title">Practice Hours</div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 75%"></div>
                    </div>
                    <div class="progress-text">45/60 hours completed</div>
                </div>
            `;

            // Upcoming classes
            document.getElementById('student-classes').innerHTML = `
                <div class="class-card">
                    <span class="class-status status-upcoming">UPCOMING</span>
                    <div class="card-title">Beginner Batch - Morning</div>
                    <div class="class-info">
                        <div class="info-row">‚è∞ Mon, Wed, Fri - 7:00 AM</div>
                        <div class="info-row">‚è±Ô∏è 1 hour</div>
                        <div class="info-row">üë§ Guru Priya</div>
                    </div>
                    <button class="btn" style="width: 100%;">Join Class</button>
                </div>
            `;

            // Attendance and payments
            document.getElementById('student-attendance').innerHTML = `
                <div style="text-align: center; padding: 20px;">
                    <div class="stat-number" style="color: #388e3c;">85%</div>
                    <div class="stat-label">Overall Attendance</div>
                </div>
            `;

            document.getElementById('student-payments').innerHTML = `
                <div style="text-align: center; padding: 20px;">
                    <div class="stat-number" style="color: #d84315;">‚Çπ2,000</div>
                    <div class="stat-label">Pending Payment</div>
                </div>
            `;
        }

        // Mudras functions
        function loadMudras() {
            allMudras = sampleMudras;
            displayMudras(allMudras);
        }

        function displayMudras(mudras) {
            const grid = document.getElementById('mudraGrid');
            grid.innerHTML = mudras.map(mudra => `
                <div class="card" onclick="showMudraDetail('${mudra._id}')">
                    <div class="card-image">
                        <img src="${mudra.image}" alt="${mudra.name}" onerror="this.parentElement.innerHTML='ü§ö'">
                    </div>
                    <div class="card-content">
                        <span class="card-category">${mudra.category}</span>
                        <div class="card-title">${mudra.name}</div>
                        <div class="card-description">${mudra.description}</div>
                        ${currentUser.role !== 'student' ? `
                            <div style="margin-top: 15px;">
                                <button class="btn btn-warning btn-sm" onclick="event.stopPropagation(); editMudra('${mudra._id}')">Edit</button>
                                <button class="btn btn-danger btn-sm" onclick="event.stopPropagation(); deleteMudra('${mudra._id}')">Delete</button>
                            </div>
                        ` : ''}
                    </div>
                </div>
            `).join('');
        }

        function filterMudras() {
            const category = document.getElementById('mudra-category-filter').value;
            if (category === '') {
                displayMudras(allMudras);
            } else {
                const filtered = allMudras.filter(mudra => mudra.category === category);
                displayMudras(filtered);
            }
        }

        function showMudraDetail(id) {
            const mudra = allMudras.find(m => m._id === id);
            document.getElementById('mudraDetail').innerHTML = `
                <img src="${mudra.image}" style="width: 100%; border-radius: 12px; margin-bottom: 20px;" onerror="this.style.display='none'">
                <h2 style="margin-bottom: 15px;">${mudra.name}</h2>
                <span class="card-category">${mudra.category}</span>
                <h3 style="margin-top: 20px; margin-bottom: 10px;">Description</h3>
                <p style="line-height: 1.6; color: #666;">${mudra.description}</p>
                <h3 style="margin-top: 20px; margin-bottom: 10px;">Usage/Meaning</h3>
                <p style="line-height: 1.6; color: #666;">${mudra.meaning}</p>
                <button class="btn" style="margin-top: 25px; width: 100%;">‚ñ∂Ô∏è Watch Tutorial Video</button>
            `;
            openModal('mudraModal');
        }

        // Students Management functions
        function loadStudents() {
            // Sample students data
            allStudents = [
                {
                    _id: '1',
                    userId: { name: 'Student Demo', email: 'student@rudrakalshethra.com', phone: '9876543210' },
                    branch: 'kothavara',
                    totalClassesAttended: 12,
                    pendingAmount: 2000
                },
                {
                    _id: '2',
                    userId: { name: 'Priya Sharma', email: 'priya@example.com', phone: '9876543211' },
                    branch: 'ambikamarket',
                    totalClassesAttended: 8,
                    pendingAmount: 1200
                }
            ];

            const tbody = document.getElementById('students-table').querySelector('tbody');
            tbody.innerHTML = '';
            
            allStudents.forEach(student => {
                const row = tbody.insertRow();
                row.innerHTML = `
                    <td>${student.userId.name}</td>
                    <td>${student.userId.email}</td>
                    <td>${student.userId.phone}</td>
                    <td>${student.branch}</td>
                    <td>${student.totalClassesAttended}</td>
                    <td>‚Çπ${student.pendingAmount}</td>
                    <td>
                        <button class="btn btn-warning btn-sm" onclick="markPayment('${student._id}')">Payment</button>
                        <button class="btn btn-sm" onclick="viewStudent('${student._id}')">View</button>
                    </td>
                `;
            });
        }

        function filterStudents() {
            const searchTerm = document.getElementById('student-search').value.toLowerCase();
            const filtered = allStudents.filter(student => 
                student.userId.name.toLowerCase().includes(searchTerm) ||
                student.userId.email.toLowerCase().includes(searchTerm) ||
                student.branch.toLowerCase().includes(searchTerm)
            );
            
            const tbody = document.getElementById('students-table').querySelector('tbody');
            tbody.innerHTML = '';
            
            filtered.forEach(student => {
                const row = tbody.insertRow();
                row.innerHTML = `
                    <td>${student.userId.name}</td>
                    <td>${student.userId.email}</td>
                    <td>${student.userId.phone}</td>
                    <td>${student.branch}</td>
                    <td>${student.totalClassesAttended}</td>
                    <td>‚Çπ${student.pendingAmount}</td>
                    <td>
                        <button class="btn btn-warning btn-sm" onclick="markPayment('${student._id}')">Payment</button>
                        <button class="btn btn-sm" onclick="viewStudent('${student._id}')">View</button>
                    </td>
                `;
            });
        }

        function showAddStudentForm() {
            openModal('addStudentModal');
        }

        function handleAddStudent(e) {
            e.preventDefault();
            alert('Student added successfully!');
            closeModal('addStudentModal');
            loadStudents();
            document.getElementById('addStudentForm').reset();
        }

        function exportStudentData() {
            alert('Student data exported successfully!');
        }

        // Attendance functions
        function loadStudentsForAttendance() {
            const tbody = document.getElementById('attendance-table').querySelector('tbody');
            tbody.innerHTML = '';
            
            allStudents.forEach(student => {
                const row = tbody.insertRow();
                row.innerHTML = `
                    <td>${student.userId.name}</td>
                    <td>${student.branch}</td>
                    <td>
                        <input type="checkbox" id="attendance-${student._id}" checked>
                    </td>
                    <td>
                        <button class="btn btn-warning btn-sm" onclick="toggleAttendance('${student._id}')">Toggle</button>
                    </td>
                `;
            });
        }

        function toggleAttendance(studentId) {
            const checkbox = document.getElementById(`attendance-${studentId}`);
            checkbox.checked = !checkbox.checked;
        }

        function bulkMarkAttendance(present) {
            const checkboxes = document.querySelectorAll('#attendance-table input[type="checkbox"]');
            checkboxes.forEach(checkbox => {
                checkbox.checked = present;
            });
            alert(`${present ? 'All marked as present' : 'All marked as absent'}`);
        }

        function submitAttendance() {
            alert('Attendance submitted successfully!');
        }

        // Payments functions
        function loadPayments() {
            // Sample payments data
            const payments = [
                {
                    student: 'Student Demo',
                    amount: 2000,
                    classesCount: 10,
                    date: '2023-11-01',
                    method: 'cash',
                    receivedBy: 'Admin'
                },
                {
                    student: 'Priya Sharma',
                    amount: 1200,
                    classesCount: 6,
                    date: '2023-11-05',
                    method: 'online',
                    receivedBy: 'Manager'
                }
            ];

            const tbody = document.getElementById('payments-table').querySelector('tbody');
            tbody.innerHTML = payments.map(payment => `
                <tr>
                    <td>${payment.student}</td>
                    <td>‚Çπ${payment.amount}</td>
                    <td>${payment.classesCount}</td>
                    <td>${payment.date}</td>
                    <td>${payment.method}</td>
                    <td>${payment.receivedBy}</td>
                    <td>
                        <button class="btn btn-sm" onclick="viewReceipt('${payment.student}')">Receipt</button>
                    </td>
                </tr>
            `).join('');
        }

        function showAddPaymentForm() {
            openModal('addPaymentModal');
            
            // Populate student dropdown
            const select = document.getElementById('paymentStudent');
            select.innerHTML = '';
            allStudents.forEach(student => {
                const option = document.createElement('option');
                option.value = student._id;
                option.textContent = `${student.userId.name} (${student.branch}) - ‚Çπ${student.pendingAmount} pending`;
                select.appendChild(option);
            });
        }

        function handleAddPayment(e) {
            e.preventDefault();
            alert('Payment recorded successfully!');
            closeModal('addPaymentModal');
            loadPayments();
            document.getElementById('addPaymentForm').reset();
        }

        function exportPaymentData() {
            alert('Payment data exported successfully!');
        }

        function markPayment(studentId) {
            showAddPaymentForm();
            setTimeout(() => {
                document.getElementById('paymentStudent').value = studentId;
            }, 100);
        }

        // Theory functions
        function loadTheory() {
            allTheory = sampleTheory;
            displayTheory(allTheory);
        }

        function displayTheory(theory) {
            const grid = document.getElementById('theoryGrid');
            grid.innerHTML = theory.map(item => `
                <div class="card" onclick="showTheoryDetail('${item._id}')">
                    <div class="card-content">
                        <span class="card-category">${item.category}</span>
                        <div class="card-title">${item.title}</div>
                        <div class="card-description">${item.description}</div>
                        ${currentUser.role !== 'student' ? `
                            <div style="margin-top: 15px;">
                                <button class="btn btn-warning btn-sm" onclick="event.stopPropagation(); editTheory('${item._id}')">Edit</button>
                                <button class="btn btn-danger btn-sm" onclick="event.stopPropagation(); deleteTheory('${item._id}')">Delete</button>
                            </div>
                        ` : ''}
                    </div>
                </div>
            `).join('');
        }

        function showAddTheoryForm() {
            openModal('addTheoryModal');
        }

        function handleAddTheory(e) {
            e.preventDefault();
            alert('Theory content added successfully!');
            closeModal('addTheoryModal');
            loadTheory();
            document.getElementById('addTheoryForm').reset();
        }

        function showTheoryDetail(id) {
            const theory = allTheory.find(t => t._id === id);
            document.getElementById('theoryDetail').innerHTML = `
                <h2 style="margin-bottom: 15px;">${theory.title}</h2>
                <span class="card-category">${theory.category}</span>
                <h3 style="margin-top: 20px; margin-bottom: 10px;">Description</h3>
                <p style="line-height: 1.6; color: #666;">${theory.description}</p>
                <h3 style="margin-top: 20px; margin-bottom: 10px;">Content</h3>
                <div style="line-height: 1.8; color: #666; background: #f9f9f9; padding: 20px; border-radius: 8px;">
                    ${theory.content}
                </div>
            `;
            openModal('theoryModal');
        }

        // Classes functions
        const sampleClasses = [
            {
                _id: '1',
                title: 'Beginner Batch - Morning',
                schedule: 'Mon, Wed, Fri - 7:00 AM',
                duration: '1 hour',
                instructor: 'Guru Priya',
                meetLink: 'https://meet.google.com/xxx-xxxx-xxx',
                status: 'upcoming',
                branch: 'kothavara'
            },
            {
                _id: '2',
                title: 'Intermediate Level - Evening',
                schedule: 'Tue, Thu, Sat - 6:00 PM',
                duration: '1.5 hours',
                instructor: 'Guru Lakshmi',
                meetLink: 'https://meet.google.com/yyy-yyyy-yyy',
                status: 'ongoing',
                branch: 'ambikamarket'
            }
        ];

        function loadClasses() {
            displayClasses(sampleClasses);
        }

        function displayClasses(classes) {
            const container = document.getElementById('classesContainer');
            container.innerHTML = classes.map(cls => `
                <div class="class-card">
                    <span class="class-status status-${cls.status}">${cls.status.toUpperCase()}</span>
                    <div class="card-title">${cls.title}</div>
                    <div class="class-info">
                        <div class="info-row">‚è∞ ${cls.schedule}</div>
                        <div class="info-row">‚è±Ô∏è ${cls.duration}</div>
                        <div class="info-row">üë§ ${cls.instructor}</div>
                        <div class="info-row">üè¢ ${cls.branch}</div>
                    </div>
                    <button class="btn" style="width: 100%;" onclick="window.open('${cls.meetLink}', '_blank')">üé• Join Class</button>
                </div>
            `).join('');
        }

        function showAddClassForm() {
            openModal('addClassModal');
        }

        function handleAddClass(e) {
            e.preventDefault();
            alert('Class added successfully!');
            closeModal('addClassModal');
            loadClasses();
            document.getElementById('addClassForm').reset();
        }

        // Calendar functions
        function loadCalendar() {
            updateCalendarHeader();
            renderCalendar();
        }

        function updateCalendarHeader() {
            const monthNames = ["January", "February", "March", "April", "May", "June",
                "July", "August", "September", "October", "November", "December"];
            document.getElementById('current-month').textContent = 
                `${monthNames[currentMonth]} ${currentYear}`;
        }

        function renderCalendar() {
            const calendarGrid = document.getElementById('calendar-days');
            calendarGrid.innerHTML = '';

            // Add day headers
            const dayNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            dayNames.forEach(day => {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day';
                dayElement.style.fontWeight = 'bold';
                dayElement.textContent = day;
                calendarGrid.appendChild(dayElement);
            });

            // Get first day of month and number of days
            const firstDay = new Date(currentYear, currentMonth, 1).getDay();
            const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();

            // Add empty cells for days before the first day of the month
            for (let i = 0; i < firstDay; i++) {
                const emptyDay = document.createElement('div');
                emptyDay.className = 'calendar-day';
                calendarGrid.appendChild(emptyDay);
            }

            // Add days of the month
            const today = new Date();
            for (let day = 1; day <= daysInMonth; day++) {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day';
                dayElement.textContent = day;

                // Check if today
                if (day === today.getDate() && currentMonth === today.getMonth() && currentYear === today.getFullYear()) {
                    dayElement.classList.add('active');
                }

                // Add class markers (sample data)
                if (day % 3 === 0 || day % 5 === 0) {
                    dayElement.classList.add('has-class');
                }

                dayElement.onclick = () => showDayClasses(day);
                calendarGrid.appendChild(dayElement);
            }
        }

        function changeMonth(direction) {
            currentMonth += direction;
            if (currentMonth < 0) {
                currentMonth = 11;
                currentYear--;
            } else if (currentMonth > 11) {
                currentMonth = 0;
                currentYear++;
            }
            loadCalendar();
        }

        function showDayClasses(day) {
            alert(`Classes on ${day}/${currentMonth + 1}/${currentYear}:\n- Morning Class: 7:00 AM\n- Theory Session: 4:00 PM`);
        }

        // Modal functions
        function openModal(modalId) {
            document.getElementById(modalId).classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        // Form handlers
        function handleAddMudra(e) {
            e.preventDefault();
            alert('Mudra added successfully!');
            closeModal('addMudraModal');
            loadMudras();
            document.getElementById('addMudraForm').reset();
        }

        // Placeholder functions
        function editMudra(id) {
            alert('Edit mudra functionality for: ' + id);
        }

        function deleteMudra(id) {
            if (confirm('Are you sure you want to delete this mudra?')) {
                alert('Delete mudra: ' + id);
            }
        }

        function editTheory(id) {
            alert('Edit theory functionality for: ' + id);
        }

        function deleteTheory(id) {
            if (confirm('Are you sure you want to delete this theory?')) {
                alert('Delete theory: ' + id);
            }
        }

        function viewStudent(id) {
            alert('View student details for: ' + id);
        }

        function viewReceipt(student) {
            alert('Generate receipt for: ' + student);
        }

        // Close modal when clicking outside
        document.querySelectorAll('.modal').forEach(modal => {
            modal.addEventListener('click', function(event) {
                if (event.target === this) {
                    this.classList.remove('active');
                }
            });
        });
    </script>
</body>
</html>